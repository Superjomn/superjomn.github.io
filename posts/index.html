<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet type=text/css href=/css/bootstrap.min.css><link rel=stylesheet type=text/css href=/css/style.css><title>Superjomn's blog | Posts</title><meta name=google-site-verification content="kO2XszgjIr1OyaOubGpeb0M34ADBz27vyI1dLETarCM"></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-Z60BDN3JGH"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Z60BDN3JGH")</script><body><div id=nav-border class=container><nav id=nav class="nav justify-content-center"><a class=nav-link href=/><i data-feather=home></i>
Home</a>
<a class=nav-link href=/posts/><i data-feather=pen-tool></i>
Posts</a>
<a class=nav-link href=/tags/><i data-feather=tag></i>
Tags</a>
<a class=nav-link href=/posts/about/><i data-feather=info></i>
About</a></nav></div><div class=container><main id=main><h1>Posts</h1><p><h3><a class=title href=/posts/apple-tv-as-service/>Apple TV 折腾记</a></h3><i data-feather=calendar></i> <time datetime=2023-04-18>Apr 18, 2023</time>
<span id=social></span><i data-feather=tag></i>
<a class="btn btn-sm btn-outline-dark tag-btn" href=tags/recreation>recreation</a>
<a class=summary href=/posts/apple-tv-as-service/><p>由于房屋面积有限，我们的大厅一直没有安装电视。相反，我们使用了一个较大的LG 4K显示器作为娱乐中心，并搭配了两个巨大的Fyne落地音箱，效果不错。我们主要观看的节目是Netflix，晚上我们会和家人一起围在电脑旁边观看，感觉还不错。但是，将显示器用作电视存在一个问题，就是必须通过操作系统进行操作。由于我的职业是程序员，一旦接触电脑，就不由自主地敲击键盘，并且很容易进入工作模式，这对放松娱乐有些影响。
因此，我开始考虑使用Apple TV作为我们的娱乐中心。我选择这个方案的原因如下：
电视盒子本身可以提供完整的电视体验，操作相对简单，可以将电脑关闭以便更好地放松娱乐。 Apple TV可以安装Netflix、Youtube等应用程序，支持我们现有的娱乐方式。 它具有HDMI接口，完美兼容我们现有的4K显示器，并且在未来升级成电视时也不会有问题。 现在，我们家的娱乐系统已经成为一套完整的影音系统。下面是我使用Apple TV的Recipe和我的考虑，供大家参考。
Apple TV 本体
Apple TV 本体还是挺便宜的，可能 Apple 真正挣钱的是 Itunes 这类订阅服务吧，硬件只是附带的。我买的型号是 &ldquo;Apple 苹果TV电视21/22新款 TV6 4K机顶盒子TV 7代 5.0 A15仿生电视盒子 苹果TV7代 128GB WIFI+网线版 美版&rdquo;，价格是 1379人民币，你可以在淘宝或者京东找到。
Wifi路由器
接下来需要有一款可以科学上网的 Wifi 路由器，这类 Wifi 由于要安装固件以及 ShadowSocks APP，因此一般配置要高一些也贵一些。
路由器一般要安装梅林固件，你最好了解下 梅林固件到底是什么-zhihu，只有华硕的一部分型号可以支持。
我选择的是 &ldquo;华硕（ASUS）RT-AX86U双频5700M全千兆电竞路由无线路由器/一键性能加速/2.5G端口/WiFi6路由/PS5网络加速&rdquo;，同样你可以在京东或者淘宝找到这款路由器，拼多多或者咸鱼上有可能找到更便宜的价格。 这是一款中高端的路由器，性能应该有点过剩了，我之前计划利用它自带的 USB 接口搭建一个简易的 NAS，但考虑到 4GB 的单个文件限制，最终没有实施；目前这是一个欠开发的，比较奢侈的路由器。
路由器连上网络后，需要刷梅林固件，这个网上教程很多，我参考比较多的是 这个。 当然，前提是有个科学上网的 V&amp;P&amp;N，绑定到 WIFI 路由器中。
激活网络后，Apple TV 连上 WIFI，现在你应该已经能够激活和使用 Apple TV 了。
音响DAC的支持
虽然Apple TV支持AirPlay音源输出，但如果家里的音响是类似于HomePod或其他支持的播放器，只需要在设置里进行添加，就可以正常使用了。然而，由于我家里有一套音响系统，有专门的DAC，所以使用AirPlay这类有损的传输就比较可惜了。因此，我找到了一款HDMI拆分音源信息到光纤的转换器，名为“毕亚兹 HDMI2.0音频分离器线 4K/60HZ高清视频7.1光纤/同轴/3.5mm音频转换器笔记本机顶盒连接电视音响 ZH136”，可以完美支持AURALIC这类播放器的光纤输入。 注意，这里特定的参数才能支持 4K 视频的输出。转换后的音质与电脑的USB相比没有明显的差别，对于电视节目已经足够了吧。</p></a></p><p><h3><a class=title href=/posts/python-vm-brief-introduction/>Python VM 执行方式简要探索</a></h3><i data-feather=calendar></i> <time datetime=2023-02-24>Feb 24, 2023</time>
<span id=social></span><i data-feather=tag></i>
<a class="btn btn-sm btn-outline-dark tag-btn" href=tags/python>python</a>
<a class=summary href=/posts/python-vm-brief-introduction/><p>Python Code Object 有用的 attribute Python Bytecode 理解 Python Frame 修改 Frame 的 Code Object 总结 FYI 最近在看 TorchDynamo 的东西，里面需要对 Python 执行机制有一些了解，所以单独拆开放到了这篇文章里。
本文会从可复现的角度，多一些可以执行的例子。
Python Code Object 这里是简单的介绍，详细的可以参考 code objects 这本书的章节。
Code object 用来记录 Python 的 byte code，对应的粒度是 Block，这里的 Block 可以包含从 Module 到 Class definition 到 Function body 的各类结构（有别于编译器里面的 BasicBlock）。 可以理解 Code object 是可以嵌套的。
我们先从一个简单的函数开始
def foo(name, age): ''' Get the information of a person. ''' born = 2023 - age return f"hello {name}, born at {born}!</p></a></p><p><h3><a class=title href=/posts/python-functools-introduction/>Python functools 包简要实践</a></h3><i data-feather=calendar></i> <time datetime=2023-02-22>Feb 22, 2023</time>
<span id=social></span><i data-feather=tag></i>
<a class="btn btn-sm btn-outline-dark tag-btn" href=tags/python>python</a>
<a class=summary href=/posts/python-functools-introduction/><p>Python functools 包简要实践 在阅读 Pytorch 代码时，发现很多 Python 的新的用法比较有趣，之前笔者大部分时间在 C++ 上，这里整理和记录一些有趣的用法。 本文先从 functools 这个包开始。
@total_ordering shortcut to make class orderable 为了让一个 Class 能够比较，我们正常需要定义一堆 slots， __gt__(), __ge__(),~_lt_()~, __le__(), __eq__() 等等。 但其实只需要 __eq__() 和 其他任一方法(比如 __gt__() ) 便可以组合出其他方法。
@total_ordering 便用于这类场景的 helper，如下代码
from functools import total_ordering @total_ordering class Stuff: def __init__(self, x): self.x = x def __eq__(self, other:"Stuff"): return self.x == other.x def __gt__(self, other:"Stuff"): return self.x > other.x a = Stuff(0) b = Stuff(1) print(f"a &lt; b?</p></a></p><p><h3><a class=title href=/posts/triton-mlir-publish/>OpenAI/Triton MLIR 迁移工作简介</a></h3><i data-feather=calendar></i> <time datetime=2022-11-15>Nov 15, 2022</time>
<span id=social></span><i data-feather=tag></i>
<a class="btn btn-sm btn-outline-dark tag-btn" href=tags/tritoncompiler>triton,compiler</a>
<a class=summary href=/posts/triton-mlir-publish/><p>Triton 简介 定位 新代码中的架构 Python 界面之 Frontend 性能优化之 Optimizer TritonGPU Dialect TritonIR 的优化 TritonGPU IR 的优化 高性能 LLVM 生成之 Backend PTX inline asm MMA 指令生成 FYI GEMM 在 Optimizer Pass 效果 经过几个月的不懈努力，OpenAI Triton已经成功完成了面向MLIR Infra的迁移/重构工作，并将其最新的基于MLIR的代码合并至主分支。这个工作是由OpenAI和NVIDIA相关团队近几个月来深入合作完成的，而我也有幸参与其中。在这篇文章中，我将分享一些技术总结，记录一些收获和思考。
尽管Triton目前的开源开发非常迅速，但本文将主要聚焦于基于MLIR Infra进行重构的第一个版本的代码（这应该也是两三个月前的）
Triton 简介 OpenAI Triton paper 中的介绍是 &ldquo;An Intermediate Language and Compiler for Tiled Neural Network Computations&rdquo;，其中几个关键词应该能够代表其特点：
Intermediate Language, 目前是基于 Python 的 DSL Compiler ，是一个经典的 Compiler 的架构 Tiled Computation，面向 GPU 体系特点，自动分析和实施 tiling 定位 由于 Triton 的开发非常迅速，这里只讨论当前 Triton 的功能。</p></a></p><p><h3><a class=title href=/posts/emacs-essentials/>Emacs essentials</a></h3><i data-feather=calendar></i> <time datetime=2022-10-15>Oct 15, 2022</time>
<span id=social></span><i data-feather=tag></i>
<a class="btn btn-sm btn-outline-dark tag-btn" href=tags/emacs>emacs</a>
<a class=summary href=/posts/emacs-essentials/><p>It is a steep learning curve to master Emacs lisp, there are mainly two issues in it from my experience
the lisp syntax and functional programming the fragmented methods and libraries For the 1st issue, it is easy to master the syntax after writing several programs and getting used to them, but for the 2nd one, one needs to take notes or remember something.
In this blog, I focus on the 2nd point and keep updating the notes of some methods and libraries that I think are essential for writing Emacs lisp packages.</p></a></p><p><h3><a class=title href=/posts/about/>About me</a></h3><i data-feather=calendar></i> <time datetime=2022-10-15>Oct 15, 2022</time>
<span id=social></span><i data-feather=tag></i>
<a class="btn btn-sm btn-outline-dark tag-btn" href=tags/about-me>about-me</a>
<a class=summary href=/posts/about/><p>About me Thank you for your interest.
I am a Deep Learning system architect at NVIDIA, and my current focus is high-performance AI Compiler(on GPU).
Before this, I was a senior engineer in Baidu, working as an architect on PaddlePaddle (one of the most popular open-sourced deep learning frameworks in China market).
I was the creator & primary author & tech lead of the following projects in PaddlePaddle ecosystem (before 2022-6)</p></a></p><p class="footer text-center">Copyright (c) 2023 Chunwei Yan</p></main></div><script src=/js/feather.min.js></script>
<script>feather.replace()</script></body></html>